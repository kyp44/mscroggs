\documentclass{article}
\input{common/prelude}

% Macros
\input{common/macros}
\input{questions}
\input{boxes}

\begin{document}

\title{MS Scroggs Advent Calendar 2022 Answers}
\author{Dan Whitman}
\date{}

\maketitle

% TODO: Once the event is over, add answers link.
%Answers: \href{https://www.mscroggs.co.uk/puzzles/advent2021}{https://www.mscroggs.co.uk/puzzles/advent2021}
Synchronized calendar: \href{http://mscroggs.co.uk/adventcode/JYcziCbI}{http://mscroggs.co.uk/adventcode/JYcziCbI}

\aproblem{1}{162}{\advent@xxii@i}{
  Since $p_1 = (9,0)$ is a vertex and the $y$-axis is a line of symmetry, it must be that a second vertex is $p_2 = (-9, 0)$.
  Since there must be four vertices, and both $p_1$ and $p_2$ are on the $x$-axis, it must be that the other two vertices are on the $y$-axis.
  This is because any vertex not on either axis would result in four vertices not on either axis due to the axes being lines of symmetry, and a rectangle cannot have six vertices!
  It then must be that the two $y$-axis vertices are at $p_3 = (0, 9)$ and $p_4 = (0, -9)$, since any other points that possess the required symmetry would result in a parallelogram without right angles.

  Therefore, our rectangle is also square that clearly has sides of $s = \sqrt{9^2 + 9^2} = 9\sqrt{2}$.
  The area is then of course $A = s^2 = 81 \cdot 2 = 162$.
}

\aproblem{2}{840}{\advent@xxii@ii}{
  Clearly $1$, $2$, $3$, $5$, and $7$ are prime whereas $4 = 2^2$, $6 = 2 \cdot 3$, and $8 = 2^3$.
  Therefore we have that
  \gath{
    \lcm(1, 2, 3, 4, 5, 6, 7, 8) = 2^3 \cdot 3 \cdot 5 \cdot 7 = 840 \,.
  }
}

\aproblem{3}{369}{\advent@xxii@iii}{
  Suppose that for the $n$th row we choose the element in the $p_n$th column (where $1 \leq n, p_n \leq 9$).
  Since we must only choose exactly one number in each column, clearly for any permutation we have that $\braces{p_n \mid 1 \leq n \leq 9} = \braces{1, 2, \ldots, 9}$, and hence
  \gath{
    \sum_{n=1}^9 p_n = 1 + 2 + \ldots + 9 = \sum_{i=1}^9 i = \frac{9 \cdot 10}{2} = 45 \,.
  }
  Now, if $x_n$ is the selected value of the $n$th row, then this value is reasoned to be
  \gath{
    x_n = 9(n-1) + p_n \,.
  }
  Hence, the sum of all the selected values is always
  \gath{
    \sum_{n=1}^9 x_n = \sum_{n=1}^9 \squares{9(n-1) + p_n} = 9 \sum_{n=1}^9 n - 9 \sum_{n=1}^9 1 + \sum_{n=1}^9 p_n
    = 9 \cdot 45 - 9 \cdot 9 + 45 = 369
  }
  regardless of the selection permutation.
  This result was verified by a brute force Python program.
}

\aproblem{4}{625}{\advent@xxii@iv}{
  First, clearly the last three digits of any number $n \geq 100$ is just $n \mod 1000$.
  We claim, for all $n \geq 3$, that
  \gath{
    5^n \mod 1000 = \begin{cases}
      625 & \text{$n$ is even}    \\
      125 & \text{$n$ is odd} \,,
    \end{cases}
  }
  which we show by induction on $n$.
  First, for $n = 3$, we obviously have $5^3 = 125 \equiv 125 \pmod{1000}$ so that the hypothesis is true here since $n = 3$ is odd.
  Now suppose that the hypothesis is true for $n$.
  If $n$ is even then $5^n \equiv 625 \pmod{1000}$ so that
  \gath{
    5^{n+1} = 5 \cdot 5^n \equiv 5 \cdot 625 \pmod{1000} \equiv 3125 \pmod{1000} \equiv 125 \pmod{1000},
  }
  which proves the hypothesis for $n+1$ since $n+1$ is odd.
  If, on the other hand, $n$ is odd, then $5^n \equiv 125 \pmod{1000}$ by the induction hypothesis so that
  \gath{
    5^{n+1} = 5 \cdot 5^n \equiv 5 \cdot 125 \pmod{1000} \equiv 625 \pmod{1000},
  }
  which again proves the hypothesis for $n+1$ since here $n+1$ is even.

  Now, since clearly $n = 2022000000$ is even, it follows that the last three digits of $5^n$ are $625$ by what was just proven.
}

\aproblem{5}{315}{\advent@xxii@v}{
  \boxans{\gridsol@advent@xxii@v}
}

\aproblem{6}{128}{\advent@xxii@vi}{
  First, consider a general sum digit $1 \leq s \leq 9$, and let $N_m(s)$ denote the number of $m$-digit numbers such that the digits are all non-zero digits and add to $s$.
  Clearly $N_1(s) = 1$, namely the single digit $s$ itself.
  Next, consider $m$-digit numbers for $m > 1$.
  If the first digit is $1$, then there are $N_{m-1}(s-1)$ combinations of remaining digits so that to overall digital sum is $s$.
  Likewise, if the first digit is $2$, then there are $N_{m-1}(s-2)$ combinations of remaining digits.

  More generally, if the first digit is $1 \leq i \leq s - (m-1)$, then there are $N_{m-1}(s - i)$ combinations of remaining digits such that the overall digital sum is $s$.
  Note that $i \leq s - (m-1)$ since the minimal sum of the remaining digits is $m-1$, namely when they are all \mn{1}.
  Therefore, considering all the first digits, we have the recursive equation
  \gath{
    N_m(s) = \sum_{i=1}^{s - (m-1)} N_{m-1}(s - i) = \sum_{j=m-1}^{s-1} N_{m-1}(j), \label{eqn:06:rec}
  }
  where we have changed indices using $j = s - i$.
  Also note that it must be that $m \leq s$ since there are no terms otherwise, and $m = s$ corresponds to an $s$-digit number with a digital sum $s$ so that all digits must be \mn{1}, and hence $N_s(s) = 1$.

  For a given $s$, it follows that the total number of qualifying integers (with any number of digits) with that digital sum is then
  \gath{
    N_s = \sum_{m=1}^s N_m(s). \label{eqn:06:main}
  }
  Now, we have
  \gath{
    N_2(s) = \sum_{j=1}^{s-1} N_1(j) = \sum_{j=1}^{s-1} 1 = (s - 1) - 1 + 1 = s - 1
  }
  and
  \ali{
    N_3(s) &= \sum_{j=2}^{s-1} N_2(j) = \sum_{j=2}^{s-1} (s - 1) = \sum_{j=2}^{s-1} s - \sum_{j=2}^{s-1} 1 = \squares{\frac{s(s-1)}{2} - 1} - (s - 2) \non
    &= \frac{s(s-1)}{2} - s + 1 = \frac{s(s-1) - 2s + 2}{2} = \frac{s^2 - 3s + 2}{2} = \frac{(s-1)(s-2)}{2}.
  }
  This could be continued to $N_4(s)$, $N_5(s)$, etc., but this would quickly become very tedious.
  In our case we are looking for $N_8$, for which we would need to determine $N_m(s)$ up through $N_8(s)$.
  Rather than endure this tedium, we simply implement the recursive function \eqref{eqn:06:rec} with the base case of $N_1(s) = 1$ in Python and use \eqref{eqn:06:main} to calculate $N_8 = 128$.

  This result was also verified with a brute force search in the Python program.
}

\aproblem{7}{476}{\advent@xxii@vii}{
  It seems fairly clear that the largest triangle that can fit within a hexagon is that whose three vertices lie on every other vertex of the hexagon as shown below:
  \def\hexr{3}
  \begin{center}
    \begin{tikzpicture}
      \draw (-30:\hexr) -- (30:\hexr) -- (90:\hexr) -- (150:\hexr) -- (210:\hexr) -- (270:\hexr) -- cycle;
      \draw[fill=red] (-30:\hexr) -- (90:\hexr) -- (210:\hexr) -- cycle;
    \end{tikzpicture}
  \end{center}
  Let $s$ denote the side length of the hexagon, and let $t$ denote the side of the inner red triangle, which is clearly equilateral.
  The three smaller white triangles inside the hexagon but outside the red triangle are isosceles and have two side of length $s$ and a base of length $t$.
  Moreover, the apex angles of these triangles is $120^\circ$, from which it follows that
  \gath{
    t = \sqrt{3} s
  }
  so that the area of the large red triangle is
  \gath{
    A_t = \frac{\sqrt{3}}{4} t^2 = \frac{\sqrt{3}}{4} \parens{\sqrt{3} s}^2 = \frac{3\sqrt{3}}{4} s^2.
  }
  Meanwhile, the area of the hexagon is
  \gath{
    A_h = \frac{3\sqrt{3}}{2} s^2.
  }
  Therefore, we have
  \gath{
    A_t = \frac{1}{2} A_h = \frac{1}{2} \cdot 952 = 476.
  }
}

\aproblem{8}{840}{\advent@xxii@viii}{
  Suppose that the five real roots are $a$, $b$, $c$, $d$, and $e$ so that the quintic equation is then of course
  \gath{
    (x - a)(x - b)(x - c)(x - d)(x - e) = 0.
  }
  If we were to expand this, clearly the last term is the only term to be a constant without a factor of $x$.
  This expansion would thus have the form
  \gath{
    f(x) + abcde = 0
  }
  such that $f(x)$ is some quintic in which every term has a factor of $x$.
  Therefore, $-f(x) = abcde$, which is exactly the form of the original given equation.
  Hence, the right side is the product of all the roots, which is the answer we seek!

  While not necessary to get the sought answer, we can also use this and a bit of trial and error to quickly and easily find what the roots actually are.
  Our root product $840$ has 32 factors, not including $840$ itself.
  So the roots can be determined by just plugging all the factors into the original quintic and see which result in the equation holding, being careful to also try the negatives of the factors as well.
  This tedious process was implemented in Python to arrive at the five distinct roots $\braces{-4, -3, 2, 5, 7}$.
  It was then verified using Wolfram Alpha that fully expanding the quintic $(x + 4)(x + 3)(x - 2)(x - 5)(x - 7)$ indeed results in the original quintic expression.
}

\aproblem{9}{532}{\advent@xxii@ix}{
  \boxans{\gridsol@advent@xxii@ix}
}

\aproblem{10}{800}{\advent@xxii@x}{
  \def\xmin{\frac{a}{2}}
  Let $f(x) = x^2 - ax$ and $b = -160,000$.
  Clearly the tangent line $y = b$ is perfectly horizontal so that this touches the parabola $f(x)$ when its slope is zero.
  Thus, we have that this occurs at
  \gath{
    f'(x) = 2x - a = 0 \non
    x = \xmin.
  }
  Now, since the parabola must touch the line at this point, it must be that
  \gath{
    f\parens{\xmin} = \parens{\xmin}^2 - a \parens{\xmin} = b \non
    \frac{a^2}{4} - \frac{a^2}{2} = b \non
    \frac{s^2 - 2a^2}{4} = b \non
    -\frac{a^2}{4} = b \non
    a = \sqrt{-4b} = 800.
  }
  This result was verified by plotting $f(x)$ and the line $y = b$ using Python.
}

\aproblem{11}{987}{\advent@xxii@xi}{
  Let $N_1(m)$ denote the number of qualifying $m$-digit numbers that start with a $1$, and let $N_2(m)$ be the number of qualifying $m$-digit numbers that start with a $2$.
  Similarly, let $N(m)$ denote the total number of qualifying $m$-digit numbers.
  Now, if a $m$-digit number starts with a $1$, then the next digit may either be a $1$ \emph{or} a $2$.
  Thus, it follows that
  \gath{
    N_1(m) = \begin{cases}
      1                   & m = 1  \\
      N_1(m-1) + N_2(m-1) & m > 1.
    \end{cases}
    \label{eqn:11:N1rec}
  }
  On the other hand, if an $m$-digit number starts with a $2$, then the next digit \emph{must} be a $1$ so as not to have two \mn{2} in a row.
  Therefore,
  \gath{
    N_2(m) = \begin{cases}
      1        & m = 1 \\
      N_1(m-1) & m > 1 \\
    \end{cases}
    \label{eqn:11:N2rec}
  }
  and also clearly in general
  \gath{
    N(m) = N_1(m) + N_2(m).
  }
  Combining \eqref{eqn:11:N1rec} and \eqref{eqn:11:N2rec} gives
  \gath{
    N_1(m) = \begin{cases}
      1                                         & m = 1 \\
      N_1(1) + N_2(1) = 2                       & m = 2 \\
      N_1(m-1) + N_2(m-1) = N_1(m-1) + N_1(m-2) & m > 2
    \end{cases}
  }
  Lastly, we generally have
  \gath{
    N(m) = N_1(m) + N_2(m) = N_1(m) + N_1(m-1) = N_1(m+1).
  }
  Hence,
  \gath{
    N(m) = \begin{cases}
      N_1(1) = 1                                     & m = 0  \\
      N_1(2) = 2                                     & m = 1  \\
      N_1(m+1) = N_1(m) + N_1(m-1) = N(m-1) + N(m-2) & m > 1.
    \end{cases}
    \label{eqn:11:Nrec}
  }

  Now, the recursive function $\eqref{eqn:11:Nrec}$ is just a shifted Fibonacci sequence.
  As such, these do have a closed-form solution, but it is a bit nasty and involves powers of the golden ratio and its conjugate.
  Because of this, we simply implement the recursive function in Python and evaluate our answer $N(14) = 987$.

  This result was verified using a brute force Python program.
}

\aproblem{12}{143}{\advent@xxii@xii}{
  \newcommand\maxsub[1]{{#1}_\mathrm{max}}
  For the general $2$ by $2$ matrix
  \gath{
    M = \begin{pmatrix}
      a & b \\
      c & d
    \end{pmatrix}
  }
  the determinant is of course $\abs{M} = ad - bc$.
  So, if we want to maximize this determinant, we should maximize the $ad$ term and minimize the $bc$ term.
  Thus, if $A$ is a finite set of positive integers where $x$ is the lowest number and $y$ is the greatest number and the matrix entries may be chosen from $A$, then clearly the maximum determinant is that of the matrix
  \gath{
    \maxsub{M} = \begin{pmatrix}
      y & x \\
      x & y
    \end{pmatrix}
  }
  so that the maximum determinant is $\abs{\maxsub{M}} = y^2 - x^2$.

  Thus, for the set of entries $\braces{1, 2, 3, ..., 12}$, clearly the least and greatest numbers are $x = 1$ and $y = 12$, respectively.
  It then follows that the maximum determinant we seek is $\abs{\maxsub{M}} = 12^2 - 1^2 = 143$.
}

\aproblem{13}{TODO}{\advent@xxii@xiii}{
  TODO
}

\aproblem{14}{TODO}{\advent@xxii@xiv}{
  TODO
}

\aproblem{15}{TODO}{\advent@xxii@xv}{
  TODO
}

\aproblem{16}{TODO}{\advent@xxii@xvi}{
  TODO
}

\aproblem{17}{TODO}{\advent@xxii@xvii}{
  TODO
}

\aproblem{18}{TODO}{\advent@xxii@xviii}{
  TODO
}

\aproblem{19}{TODO}{\advent@xxii@xix}{
  TODO
}

\aproblem{20}{TODO}{\advent@xxii@xx}{
  TODO
}

\aproblem{21}{TODO}{\advent@xxii@xxi}{
  TODO
}

\aproblem{22}{TODO}{\advent@xxii@xxii}{
  TODO
}

\aproblem{23}{TODO}{\advent@xxii@xxiii}{
  TODO
}

\aproblem{24}{TODO}{\advent@xxii@xxiv}{
  TODO
}

\end{document}
